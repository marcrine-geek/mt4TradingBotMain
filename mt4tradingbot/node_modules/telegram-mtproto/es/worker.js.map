{"version":3,"sources":["../src/worker.js"],"names":["pqPrimeFactorization","bytesModPow","sha1HashSync","aesEncryptSync","aesDecryptSync","console","info","runTask","data","task","bytes","x","y","m","keyBytes","ivBytes","encryptedBytes","Error","onmessage","e","taskID","result","postMessage"],"mappings":"AAAA,SAASA,oBAAT,EAA+BC,WAA/B,EAA4CC,YAA5C,EACEC,cADF,EACkBC,cADlB,QACwC,OADxC;;AAGAC,QAAQC,IAAR,CAAa,0BAAb;;AAEA,IAAMC,UAAUC,QAAQ;AACtB,UAAQA,KAAKC,IAAb;AACE,SAAK,WAAL;AAAoB,aAAOT,qBAAqBQ,KAAKE,KAA1B,CAAP;AACpB,SAAK,SAAL;AAAoB,aAAOT,YAAYO,KAAKG,CAAjB,EAAoBH,KAAKI,CAAzB,EAA4BJ,KAAKK,CAAjC,CAAP;AACpB,SAAK,WAAL;AAAoB,aAAOX,aAAaM,KAAKE,KAAlB,CAAP;AACpB,SAAK,aAAL;AAAoB,aAAOP,eAAeK,KAAKE,KAApB,EAA2BF,KAAKM,QAAhC,EAA0CN,KAAKO,OAA/C,CAAP;AACpB,SAAK,aAAL;AAAoB,aAAOX,eAAeI,KAAKQ,cAApB,EACeR,KAAKM,QADpB,EAC8BN,KAAKO,OADnC,CAAP;AAEpB;AACE,YAAM,IAAIE,KAAJ,CAAW,iBAAgBT,KAAKC,IAAK,EAArC,CAAN;AARJ;AAUD,CAXD;;AAaAS,YAAY,UAASC,CAAT,EAAY;AACtB,MAAIA,EAAEX,IAAF,KAAW,EAAf,EAAmB;AACjBH,YAAQC,IAAR,CAAa,mBAAb;AACD,GAFD,MAEO,IAAI,OAAOa,EAAEX,IAAT,KAAkB,QAAtB,EAAgC;AACrCH,YAAQC,IAAR,CAAa,4BAAb,EAA2Ca,EAAEX,IAA7C;AACD,GAFM,MAEA;AACL,QAAMY,SAASD,EAAEX,IAAF,CAAOY,MAAtB;AACA,QAAMC,SAASd,QAAQY,EAAEX,IAAV,CAAf;AACAc,gBAAY,EAAEF,MAAF,EAAUC,MAAV,EAAZ;AACD;AACF,CAVD;;AAYAC,YAAY,OAAZ","file":"worker.js","sourcesContent":["import { pqPrimeFactorization, bytesModPow, sha1HashSync,\r\n  aesEncryptSync, aesDecryptSync } from './bin'\r\n\r\nconsole.info('Crypto worker registered')\r\n\r\nconst runTask = data => {\r\n  switch (data.task) {\r\n    case 'factorize'  : return pqPrimeFactorization(data.bytes)\r\n    case 'mod-pow'    : return bytesModPow(data.x, data.y, data.m)\r\n    case 'sha1-hash'  : return sha1HashSync(data.bytes)\r\n    case 'aes-encrypt': return aesEncryptSync(data.bytes, data.keyBytes, data.ivBytes)\r\n    case 'aes-decrypt': return aesDecryptSync(data.encryptedBytes,\r\n                                              data.keyBytes, data.ivBytes)\r\n    default:\r\n      throw new Error(`Unknown task: ${data.task}`)\r\n  }\r\n}\r\n\r\nonmessage = function(e) {\r\n  if (e.data === '') {\r\n    console.info('empty crypto task')\r\n  } else if (typeof e.data === 'string') {\r\n    console.info('crypto task string message', e.data)\r\n  } else {\r\n    const taskID = e.data.taskID\r\n    const result = runTask(e.data)\r\n    postMessage({ taskID, result })\r\n  }\r\n}\r\n\r\npostMessage('ready')"]}